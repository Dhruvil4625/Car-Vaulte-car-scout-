{% extends 'base.html' %}
{% block title %}New Test Drive | Car Scout{% endblock %}
{% block content %}
<section class="container">
  <h2 class="cv-section-title">Add Test Drive</h2>
  <form method="post" class="cv-card p-3">
    {% csrf_token %}
    <div class="mb-2">
      <label class="form-label">Car / Listing</label>
      <select name="listing_id" class="form-select">
        {% for l in listings %}
        <option value="{{ l.listing_id }}" {% if preselected_listing_id == l.listing_id|stringformat:"s" %}selected{% endif %}>
          {{ l.car.make }} {{ l.car.model }} ({{ l.car.year }}) • {{ l.price }} • {{ l.status }}
        </option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-2">
      <label class="form-label">Buyer</label>
      <select name="buyer_id" class="form-select">
        {% for b in buyers %}
        <option value="{{ b.user_id }}">{{ b.name|default:b.email }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-2">
      <label class="form-label">Proposed Date</label>
      <input type="datetime-local" name="proposed_date" class="form-control">
    </div>
    <div class="mb-2">
      <label class="form-label">Notes</label>
      <textarea name="notes" class="form-control" rows="3"></textarea>
    </div>
    <div class="d-flex gap-2 mt-2">
      <button class="btn btn-primary">Create</button>
      <a href="{% url 'testdrives' %}" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
  <div class="mt-3">
    <a href="{% url 'testdrives' %}" class="btn btn-outline-dark">Back to Test Drives</a>
  </div>
{% endblock %}
